!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var a in r)("object"==typeof exports?exports:e)[a]=r[a]}}(this,function(){return function(e){function t(a){if(r[a])return r[a].exports;var o=r[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){var t=e.panel,r=t.arguments(),a=r.initialPath,o=F.showOpenPanel(a);o&&t.callback({path:o})}function n(e,t){return e.containsObject(t)?n(e,t+1):t}function i(e){var t=e.panel,r=e.command,a=e.document.currentPage(),o=NSMutableDictionary.alloc().init();return(0,_.iterate)(a.children(),function(e){var a=r.valueForKey_onLayer_forPluginIdentifier("original-layer",e,t.identifier());a&&!o.objectForKey(a.originalID)&&o.setObject_forKey(a,a.originalID)}),o}function l(e,t,r){if(!r)return void e.callback_forIdentifier({path:t},"library-deleted");var a=r.data,o=r.metadata,n={path:t,data:a,metadata:o};e.callback_forIdentifier(n,"library-data")}function s(e){var t=e.panel,r=F.showOpenPanel();if(r){var a=L.load(r,i(e));l(t,r,a)}}function c(e){var t=e.panel,r=t.arguments(),a=r.path;if(a){var o=L.load(a,i(e));l(t,a,o)}}function u(e){var t=e.panel,r=t.arguments(),a=L.create(r.path,r.name);t.callback_forIdentifier(a,"library-data")}function d(e){var t=e.panel.arguments();L.setMetadataValue(t.libraryPath,t.key,t.value)}function f(e){var t=e.panel.arguments();L.removeObject(t.libraryPath,t.objectID,t.objectType)}function y(e){var t=e.panel.arguments();(0,_.iterate)(t.objectIDs,function(e){L.removeObject(t.libraryPath,e,t.objectType)})}function g(e){var t=e.panel.arguments();L.setObjectName(t.libraryPath,t.objectID,t.objectType,t.name)}function S(e){var t=e.panel,r=t.arguments(),a=r.libraryPath,o=r.objectType,n=r.objects;(0,_.iterate)(n,function(e){var t=e.index,r=e.objectID;L.setMetadataAttributes(a,r,o,{index:t})})}function p(e){var t=e.panel.arguments(),r=t.libraryPath,a=t.objects,o=t.objectType;(0,_.iterate)(a,function(e){var t=e.index,a=e.category,n=e.objectID;L.setMetadataAttributes(r,n,o,{index:t,category:a})})}function v(e){var t=e.fontPostscriptName,r=e.fontSize,a=e.lineHeight,o=e.color,n=(0,H.rgbaToHex)(o),i=n.alpha,l=n.hex;return{fontPostscriptName:t,fontSize:r,lineHeight:a,colorAlpha:i,colorHex:l,text:""}}function m(e){var t=e.panel,r=e.selection;if(1!==r.count()||!(0,_.isTextLayer)(r.firstObject()))return void(0,_.showAlert)("Please select just one specific text layer.");var a=r.firstObject(),o=L.textStyle.getLayerTextStyle(a),n=t.arguments(),i=(0,_.map)(n.textStyles,v);if(i.containsObject(v(o)))return void(0,_.showAlert)("Text Style is already in a library.");var l=t.arguments(),s=l.libraryPath,c=l.index,u=l.category,d=l.objectID,f=L.textStyle.add(s,o,a.name(),c,u,d);t.callback(f)}function h(e){var t=(0,_.filterArrayByClass)(e.selection,MSTextLayer);if(0===t.count())return void(0,_.showAlert)("Please select text layer...");var r=e.panel,a=r.arguments(),o=a.fontPostscriptName,n=a.fontSize,i=NSFont.fontWithName_size(o,n);if(!i){var l="Font '"+o+"' cannot be found on your system. Do you want apply text style?";if(!(0,_.showConfirm)(r.name(),l))return}(0,_.iterate)(t,function(e){L.textStyle.set(e,a)})}function b(e){var t=e.panel,r=e.selection;if(1!==r.count())return void(0,_.showAlert)("Please select just one specific layer, group, symbol or an artboard.");var a=L.color.getLayerColor(r.firstObject());if(!a)return void(0,_.showAlert)("Selected layer doesnâ€™t have a color.");var o=t.arguments(),n=(0,_.map)(o.colors,H.rgbaToHex);if(n.containsObject((0,H.rgbaToHex)(a)))return void(0,_.showAlert)("Color is already in a library.");var i=o.libraryPath,l=o.index,s=o.category,c=o.objectID,u=L.color.add(i,a,null,l,s,c);t.callback(u)}function M(e){var t=e.panel,r=e.selection;if(0===r.count())return void(0,_.showAlert)("Please select layer...");var a=(0,_.rgbaToMSColor)(t.arguments().color);(0,_.iterate)(r,function(e){L.color.set(e,a)})}function A(e){var t=e.selection;if(1!==t.count())return void(0,_.showAlert)("Please select just one specific layer, group, symbol or an artboard.");var r=e.panel,a=e.command,o=e.document,n=r.arguments(),i=n.libraryPath,l=n.category,s=n.version,c=n.objectID,u=n.index,d=t.firstObject(),f=L.layer.add(i,o,a,r.identifier(),d,c,s,l,u);if(c){var y=e.document.currentPage();L.layer.reload(i,o,a,r.identifier(),y,NSArray.arrayWithObject(c))}r.callback(f)}function P(e){var t=e.command,r=e.document,a=e.panel,o=a.arguments(),n=o.libraryPath,i=o.originalIds,l=e.document.currentPage();L.layer.reload(n,r,t,a.identifier(),l,i)}function N(e,t,r,a){var o=j.doc.getPageFromName(t,B.PAGE_NAME),n=t.currentPage().name(),i={},l=0;o?o.removeAllLayers():o=j.doc.addPage(t,B.PAGE_NAME);var s=E.generate(e,t,r,o,a.colorPalette);s&&(i.colors=s.colors,l=s.height);var c=w.generate(e,t,o,l);c&&(i.fonts=c.fonts,l=c.height);var u=V.generate(e,t,r,o,a.textStyles,l);return u&&(i.textStyles=u.textStyles),t.setCurrentPage(o),n.isEqualToString(B.PAGE_NAME)||j.doc.zoom100Center(t),i}function x(e,t,r){var a=j.doc.getPageFromName(t,B.PAGE_NAME),o={};if(!a)return N(e,t,r,o);var n=t.documentData().assets().colors(),i=E.getArtboard(a);if(i){var l=E.getData(r,i);o.colorPalette=l.variables,l.data.forEach(function(t){var r=t.fromColor,a=t.toColor;n.removeObject(r),r.fuzzyIsEqual(a)||e.replaceColor_withColor(r,a)})}var s=w.getArtboard(a);if(s){var c=w.getData(s);c.forEach(function(t){var r=t.fromFont,a=t.toFont;r.isEqualToString(a)||e.replaceFont_withFont(r,a)})}var u=V.getArtboard(a);if(u){var d=V.getData(t,r,u);o.textStyles=d.variables,d.data.forEach(function(t){t.key!==t.newKey&&e.replaceTextStyle_withTextStyle(t.key,t.newData)})}return N(e,t,r,o)}function D(e){var t=e.panel,r=e.document,a=e.command,o=StyleGuideHelpers.alloc().init();o.load(r);var n=x(o,r,a);r.reloadInspector();var i={id:r.documentData().objectID(),colors:(0,H.getCount)(n.colors),fonts:(0,H.getCount)(n.fonts),textStyles:(0,H.getCount)(n.textStyles)};t.callback(i)}function T(e){var t=e.document,r=e.panel,a=r.arguments().title,o=j.doc.getPageFromName(t,B.PAGE_NAME);if(o){t.setCurrentPage(o);var n=j.page.getArtboardFromName(o,a);n&&j.doc.zoomTo(t,n)}}function C(e){var t=e.document,r=e.panel,a=e.command,o=j.doc.getPageFromName(t,B.PAGE_NAME),i=void 0;if(o){var l=E.getArtboard(o);l&&(i=E.getData(a,l).data)}if(i){var s=r.arguments(),c=NSMutableArray.alloc().initWithArray(s.usedIndexes),u=(0,_.map)(s.colors,H.rgbaToHex);L.findOrCreateCategory(s.libraryPath,"Document Colors","color");var d=[],f=0;i.forEach(function(e){var t=e.toColor,r=e.name,a=t.RGBADictionary();if(!u.containsObject((0,H.rgbaToHex)(a))){f=n(c,f),c.addObject(f);var o=L.color.add(s.libraryPath,a,r,f,NSString.stringWithString("Document Colors"));d.push(o)}}),r.callback(d)}}function O(e){var t=e.document,r=e.panel,a=e.command,o=j.doc.getPageFromName(t,B.PAGE_NAME),i=void 0;if(o){var l=V.getArtboard(o);l&&(i=V.getData(t,a,l).data)}if(i){var s=r.arguments(),c=NSMutableArray.alloc().initWithArray(s.usedIndexes),u=(0,_.map)(s.textStyles,v);L.findOrCreateCategory(s.libraryPath,"Document Text Styles","textstyle");var d=[],f=0;i.forEach(function(e){var t=e.newData,r=e.name,a=t.fontPostscriptName,o=t.fontSize,i=t.lineHeight,l=t.colorHex,y=t.colorAlpha,g=MSColor.colorWithSVGString(l);g.setAlpha(y);var S={fontPostscriptName:a,fontSize:o,lineHeight:i,color:g.RGBADictionary()};if(!u.containsObject(v(S))){f=n(c,f),c.addObject(f);var p=L.textStyle.add(s.libraryPath,S,r,f,NSString.stringWithString("Document Text Styles"));d.push(p)}}),r.callback(d)}}Object.defineProperty(t,"__esModule",{value:!0}),t.chooseFolder=o,t.chooseLibrary=s,t.importLibrary=c,t.createLibrary=u,t.setMetadata=d,t.removeObject=f,t.removeObjects=y,t.setObjectName=g,t.setObjectsIndex=S,t.changeObjectsCategory=p,t.addTextStyle=m,t.setTextStyle=h,t.addColor=b,t.setColor=M,t.addLayer=A,t.reloadLayer=P,t.syncStyleguide=D,t.showStyleguide=T,t.addColorsFromStyleGuide=C,t.addTextStylesFromStyleGuide=O;var _=r(1),j=a(_),I=r(8),L=a(I),R=r(14),F=a(R),G=r(15),B=a(G),U=r(16),E=a(U),W=r(18),w=a(W),z=r(19),V=a(z),H=r(17)},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){for(var r=e.objectEnumerator(),a=void 0;(a=r.nextObject())&&t(a)!==!1;);}function n(e,t){var r=NSMutableArray.alloc().init();return o(e,function(e){r.addObject(t(e))}),r}function i(e,t){var r=NSMutableArray.alloc().init();return o(e,function(e){t(e)&&r.addObject(e)}),r}function l(e,t){var r=NSPredicate.predicateWithFormat("self isMemberOfClass: %@",t);return e.filteredArrayUsingPredicate(r)}function s(e){return Math.round(100*e)/100}function c(e,t,r){var a=e[t];return void 0===a||null===a?r:a}function u(e){return e["class"]()===MSSymbolInstance}function d(e){return e["class"]()===MSSymbolMaster}function f(e){return e["class"]()===MSTextLayer}function y(e){var t=e.r,r=e.g,a=e.b,o=e.a;return MSColor.colorWithRed_green_blue_alpha(t,r,a,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.action=t.doc=t.page=t.layer=t.pasteboard=t.showConfirm=t.showAlert=void 0,t.iterate=o,t.map=n,t.filter=i,t.filterArrayByClass=l,t.round100=s,t.get=c,t.isSymbol=u,t.isSymbolMaster=d,t.isTextLayer=f,t.rgbaToMSColor=y;var g=r(2);Object.defineProperty(t,"showAlert",{enumerable:!0,get:function(){return g.showAlert}}),Object.defineProperty(t,"showConfirm",{enumerable:!0,get:function(){return g.showConfirm}});var S=r(3),p=a(S),v=r(4),m=a(v),h=r(5),b=a(h),M=r(6),A=a(M),P=r(7),N=a(P);t.pasteboard=p,t.layer=m,t.page=b,t.doc=A,t.action=N},function(e,t){"use strict";function r(e){var t=NSAlert.alloc().init();t.setAlertStyle(o.NSWarningAlertStyle),t.setMessageText(e),t.runModal()}function a(e,t){var r=NSAlert.alloc().init();return r.addButtonWithTitle("OK"),r.addButtonWithTitle("Cancel"),r.setInformativeText(t),r.setMessageText(e),r.runModal()===NSAlertFirstButtonReturn}Object.defineProperty(t,"__esModule",{value:!0}),t.showAlert=r,t.showConfirm=a;var o={NSWarningAlertStyle:0,NSInformationalAlertStyle:1,NSCriticalAlertStyle:2}},function(e,t){"use strict";function r(e){var t=NSPasteboard.generalPasteboard();t.declareTypes_owner([NSPasteboardTypeString],null),t.setString_forType(e,NSPasteboardTypeString)}Object.defineProperty(t,"__esModule",{value:!0}),t.writeString=r},function(e,t){"use strict";function r(e,t){t.addLayers(NSArray.arrayWithObject(e))}function a(e,t){var a=NSBezierPath.bezierPathWithRect(e),o=MSShapeGroup.shapeWithBezierPath(a);return r(o,t),"function"==typeof o.embedInShapeGroup&&(o=o.embedInShapeGroup()),o}function o(e){var t=MSTextLayer.alloc().initWithFrame(CGRectMake(0,0,100,100));return t.adjustFrameToFit(),r(t,e),t}function n(e,t){var a=MSLayerGroup.alloc().initWithFrame(e);return r(a,t),a}function i(e,t,r){var a=e.style(),o=a.borders(),n=void 0;n="function"==typeof o.addNewStylePart?o.addNewStylePart():a.addStylePartOfType(1);var i=MSColor.colorWithSVGString(t);n.setColor(i),n.setPosition(r)}function l(e){e&&e.removeFromParent()}function s(e,t,r){var a=e.userInfo().objectForKey(t);return a?a.objectForKey(r):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.addToGroup=r,t.addRectangleLayerToGroup=a,t.addTextLayerToGroup=o,t.addGroupToGroup=n,t.addBorder=i,t.removeFromParent=l,t.getUserInfoValue=s},function(e,t){"use strict";function r(e,t){for(var r=e.artboards(),a=r.count()-1;a>=0;a--){var o=r[a];if(o.name().isEqualToString(t))return o}}function a(e,t,r){if(e.artboards().count()>r){var a=e.artboards()[r];if(a.name().isEqualToString(t))return a}}function o(e,t,r){var a=MSArtboardGroup.alloc().initWithFrame(r);return e.addLayers([a]),a.setName(t),a}Object.defineProperty(t,"__esModule",{value:!0}),t.getArtboardFromName=r,t.getArtboardFromNameAndIndex=a,t.addArtboard=o},function(e,t){"use strict";function r(e,t){var r=e.addBlankPage();return r.setName(t),e.setCurrentPage(r),r}function a(e,t){for(var r=e.pages(),a=r.count()-1;a>=0;a--){var o=r[a];if(o.name().isEqualToString(t))return o}}function o(e,t){var r=e.currentView();t.setIsSelected(!0),r.zoomToSelection(),t.setIsSelected(!1)}function n(e){var t=e.currentView();"function"==typeof t.actualSizeWithoutAnimating?t.actualSizeWithoutAnimating():t.zoomToActualSizeAnimated(!1),t.animateScrollOriginToPoint(CGPointMake(100,100))}Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=r,t.getPageFromName=a,t.zoomTo=o,t.zoom100Center=n},function(e,t){"use strict";function r(e,t){var r=e.actionsController();return"function"==typeof r.actionWithName?r.actionWithName(t):r.actionWithID(t)}function a(e){var t=r(e,"MSGroupAction");return t.group(null),e.selectedLayers().firstObject()}function o(e,t){var a=t.name(),o=r(e,"MSClippingMaskAction");o.clippingMask(null),t.setName(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.get=r,t.groupSelection=a,t.toggleClipping=o},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){var t=e.stringByAppendingPathComponent("metadata.json"),r=NSString.stringWithContentsOfURL_encoding_error(NSURL.fileURLWithPath(t),NSUTF8StringEncoding,null);if(r)return JSON.parse(String(r));var a=e.lastPathComponent().stringByDeletingPathExtension(),o={modificationTime:Date.now(),name:a};return(0,h.saveMetadata)(e,o),o}function n(e,t,r){var a=o(e),n=a.categories,i=n.filter(function(e){return e.name===t&&r===e.type});0===i.length&&n.push({name:t,type:r}),(0,h.saveMetadata)(e,a)}function i(e,t){var r=NSURL.fileURLWithPath_isDirectory(e,!0),a=[],n=NSFileManager.defaultManager().contentsOfDirectoryAtURL_includingPropertiesForKeys_options_error(r,[NSURLIsDirectoryKey],NSDirectoryEnumerationSkipsHiddenFiles,null);if(n){var i=o(e),l=!0,s=void 0;return i.categories||(l=!1,s=NSMutableSet.alloc().init()),(0,f.iterate)(n,function(e){var r=e.pathExtension(),o=r.isEqualToString("layer"),n=r.isEqualToString("color"),i=r.isEqualToString("textstyle");if(n||o||i){var c=e.lastPathComponent().stringByDeletingPathExtension(),u=e.URLByAppendingPathComponent("metadata.json"),d=(0,h.readMetadata)(u);if(o){if(!l){var f=void 0;d.category?f=d.category:(f="Uncategorized",d.index=0),d.category=f,s.addObject({name:f,type:"layer"}),(0,h.saveMetadata)(e.path(),d)}var y=t.objectForKey(c);y&&(d.documentVersion=y.version),d.objectType="layer"}else n?(l||(d.category="Colors",s.addObject({name:"Colors",type:"color"}),(0,h.saveMetadata)(e.path(),d)),d.objectType="color"):i&&(l||(d.category="Text styles",s.addObject({name:"Text styles",type:"textstyle"}),(0,h.saveMetadata)(e.path(),d)),d.objectType="textstyle");d.objectID=c,a.push(d)}}),!l&&s&&(i.categories=s.allObjects(),(0,h.saveMetadata)(e,i)),{metadata:i,data:a}}}function l(e,t){var r=e.stringByAppendingPathComponent(t+".library");ICUtils.createDirectoryIfNotExist(r);var a={modificationTime:Date.now(),name:t,categories:[{name:"Uncategorized",type:"layer",index:0},{name:"Colors",type:"color"},{name:"Text Styles",type:"textstyle"}]};return(0,h.saveMetadata)(r,a),{path:r,data:[],metadata:a}}function s(e,t,r){var a=e.stringByAppendingPathComponent("metadata.json"),o=(0,h.readMetadata)(NSURL.fileURLWithPath(a));o[t]=r,(0,h.saveMetadata)(e,o)}function c(e,t,r){var a=e.stringByAppendingPathComponent(t+"."+r);NSFileManager.defaultManager().removeItemAtPath_error(a,null),(0,h.setModificationDate)(e)}function u(e,t,r,a){var o=e.stringByAppendingPathComponent(t+"."+r+"/metadata.json"),n=(0,h.readMetadata)(NSURL.fileURLWithPath(o));for(var i in a){var l=a[i];null===l?delete n[i]:n[i]=l}var s=ICUtils.objectToJSONString(n);return s.writeToFile_atomically_encoding_error(o,!0,NSUTF8StringEncoding,null),n}function d(e,t,r,a){u(e,t,r,{name:a})}Object.defineProperty(t,"__esModule",{value:!0}),t.textStyle=t.color=t.layer=void 0,t.findOrCreateCategory=n,t.load=i,t.create=l,t.setMetadataValue=s,t.removeObject=c,t.setMetadataAttributes=u,t.setObjectName=d;var f=r(1),y=r(9),g=a(y),S=r(11),p=a(S),v=r(13),m=a(v),h=r(10);t.layer=g,t.color=p,t.textStyle=m},function(e,t,r){"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t,r,a){var o=MSExportRequest.exportRequestsFromExportableLayer(e),n=o.firstObject(),i=n.rect(),l=i.size,s=l.width,c=l.height,u=void 0;t>s&&r>c?(i.origin.x-=Math.round(t/4-s/2),i.origin.y-=Math.round(r/4-c/2),i.size.width=t/2,i.size.height=r/2,n.setRect(i),u=2):u=t>=s?1:t/s,n.setFormat("png"),n.setScale(u);var d=MSExportManager.dataForRequest(n);d.writeToFile_atomically(a,!0)}function n(e,t,r,n,i,l,u,d,f){var y=i,g=void 0;if(i instanceof MSSymbolMaster)i=i.newSymbolInstance(),g=NSDictionary.dictionaryWithDictionary(a({},String(y.objectID()),y.immutableModelObject()));else{var S=MSPasteboardLayersReaderWriter.alloc().init();g=S.usedSymbolsInContainer_document(t.selectedLayersA(),t.documentData())}var p=i.name();u?u+=1:u=1,l||(l=NSUUID.UUID().UUIDString());var v=e.stringByAppendingPathComponent(l+".layer");ICUtils.createDirectoryIfNotExist(v);var m=v.stringByAppendingPathComponent("data"),h=v.stringByAppendingPathComponent("preview.png"),b={name:p,version:u,index:f},M={objectID:l,name:p,version:u,index:f,objectType:"layer"};d&&(b.category=d,M.category=d);var A=MSArray.array(),P=i.exportOptions(),N=P.exportFormats();P.setExportFormats(A),r.setValue_forKey_onLayer_forPluginIdentifier({originalID:l,version:u},"original-layer",i,n);var x=i.immutableModelObject(),D=NSURL.fileURLWithPath(m);return MSArchiver.archiveRootObject_withObjectIDs_toURL(x,!0,D),g.count()>0&&!function(){var t=e.stringByAppendingPathComponent("symbols");ICUtils.createDirectoryIfNotExist(t);var r=[];(0,s.iterate)(g,function(e){var a=e.symbolID(),o=NSURL.fileURLWithPath(t.stringByAppendingPathComponent(a+".symbol")),n=MSArchiver.archivedDataWithRootObject_withObjectIDs(e,!0);n.writeToURL_atomically(o,!0),r.push(a)}),b.symbols=r}(),(0,c.saveMetadata)(v,b),P.setExportFormats(N),o(y,138,108,h),(0,c.setModificationDate)(e),M}function i(e,t,r){var a=e.stringByAppendingPathComponent(r+".layer/metadata.json"),o=(0,c.readMetadata)(NSURL.fileURLWithPath(a)),n=t.documentData();o.symbols&&o.symbols.forEach(function(t){var r=n.symbolWithID(t);if(r){var a=e.stringByAppendingPathComponent("symbols/"+t+".symbol"),o=NSData.dataWithContentsOfFile(a);if(o){var i=MSUnarchiver.unarchiveObjectWithData(o),l=void 0;l=i instanceof MSArchiveHeader?i.root():i;var s=l["class"]().mutableClass(),c=s.alloc().initWithImmutableModelObject(l);r.removeFromParent(),n.symbolsPageOrCreateIfNecessary().addLayers([c])}}})}function l(e,t,r,a,o,n){var l=NSMutableDictionary.alloc().init();(0,s.iterate)(n,function(r){var a=e.stringByAppendingPathComponent(r+".layer/data"),o=NSData.dataWithContentsOfFile(a);if(o){var n=MSUnarchiver.unarchiveObjectWithData(o).root();l.setObject_forKey(n,r)}i(e,t,r)}),(0,s.iterate)(o.children(),function(e){var t=r.valueForKey_onLayer_forPluginIdentifier("original-layer",e,a);if(t&&n.containsObject(t.originalID))if((0,s.isSymbol)(e)){var o=l.valueForKey(t.originalID),i=o.userInfo()["com.invisionlabs.library"]["original-layer"].version,c={originalID:t.originalID,version:i};r.setValue_forKey_onLayer_forPluginIdentifier(c,"original-layer",e,a)}else{var u=e.parentGroup();if(u){var d=l.valueForKey(t.originalID),f=d["class"]().mutableClass();if(d){var y=f.alloc().initWithImmutableModelObject(d);y.setObjectID(e.objectID());var g=e.rect(),S=y.rect();S.origin=g.origin,y.setRect(S),y.setName(e.name());var p=e.exportOptions().exportFormats();y.exportOptions().setExportFormats(p),u.insertLayers_afterLayer([y],e),e.removeFromParent()}}}})}Object.defineProperty(t,"__esModule",{value:!0}),t.add=n,t.reload=l;var s=r(1),c=r(10)},function(e,t){"use strict";function r(e){var t=NSString.stringWithContentsOfURL_encoding_error(e,NSUTF8StringEncoding,null);return JSON.parse(String(t))}function a(e,t){var r=e.stringByAppendingPathComponent("metadata.json"),a=ICUtils.objectToJSONString(t);a.writeToFile_atomically_encoding_error(r,!0,NSUTF8StringEncoding,null)}function o(e){var t=e.stringByAppendingPathComponent("metadata.json"),r=NSString.stringWithContentsOfURL_encoding_error(NSURL.fileURLWithPath(t),NSUTF8StringEncoding,null),o=void 0;o=r?JSON.parse(String(r)):{},o.modificationTime=Date.now(),a(e,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.readMetadata=r,t.saveMetadata=a,t.setModificationDate=o},function(e,t,r){"use strict";function a(e){return e&&e.isEnabled()&&e.fillType()===s.FillType.Solid}function o(e){return a(e)?e.color():void 0}function n(e){var t=void 0;if(e instanceof MSTextLayer)t=e.textColor();else{var r=e.style();t=o(r.fill()),t||(t=o(r.border()))}return t?t.RGBADictionary():void 0}function i(e,t,r,a,o,n){n||(n=NSUUID.UUID().UUIDString());var i=e.stringByAppendingPathComponent(n+".color");ICUtils.createDirectoryIfNotExist(i);var l={color:t,index:a,category:o},s={objectID:n,color:t,index:a,category:o,objectType:"color"};return r&&(l.name=r,s.name=r),(0,c.saveMetadata)(i,l),(0,c.setModificationDate)(e),s}function l(e,t){if(e instanceof MSTextLayer)e.setTextColor(t);else{var r=e.style();a(r.fill())?r.fill().setColor(t):a(r.border())&&r.border().setColor(t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getLayerColor=n,t.add=i,t.set=l;var s=r(12),c=r(10)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FillType={Solid:0,Gradient:1,Pattern:4,Noise:5},t.GradientType={Linear:0,Radial:1,Circular:2},t.PatternFillType={Tile:0,Fill:1},t.NoiseFillType={Original:0,Black:1,White:2,Color:3},t.BorderLineCapsStyle={Butt:0,Round:1,Square:2},t.BorderLineJoinStyle={Miter:0,Round:1,Bevel:2},t.LineDecorationType={None:0,OpenedArrow:1,ClosedArrow:2,Bar:3},t.BlurType={GaussianBlur:0,MotionBlur:1,ZoomBlur:2,BackgroundBlur:3},t.BorderPosition={Center:0,Inside:1,Outside:2,Both:3},t.MaskMode={Outline:0,Alpha:1},t.BooleanOperation={None:-1,Union:0,Subtract:1,Intersect:2,Difference:3},t.ExportOptionsFormat={PNG:"png",JPG:"jpg",TIFF:"tiff",PDF:"pdf",EPS:"eps",SVG:"svg"},t.BlendingMode={Normal:0,Darken:1,Multiply:2,ColorBurn:3,Lighten:4,Screen:5,ColorDodge:6,Overlay:7,SoftLight:8,HardLight:9,Difference:10,Exclusion:11,Hue:12,Saturation:13,Color:14,Luminosity:15},t.TextAlignment={Left:0,Right:1,Center:2,Justified:3},t.TextBehaviour={Auto:0,Fixed:1},t.CurvePointMode={Straight:1,Mirrored:2,Disconnected:4,Asymmetric:3},t.ModelClasses={MSModelObject:"MSModelObject",MSModelBase:"MSModelBase",MSDocumentData:"MSDocumentData",MSLayer:"MSLayer",MSShapeGroup:"MSShapeGroup",MSLayerGroup:"MSLayerGroup",MSPage:"MSPage",MSTextLayer:"MSTextLayer",MSBitmapLayer:"MSBitmapLayer",MSSliceLayer:"MSSliceLayer",MSArtboardGroup:"MSArtboardGroup",MSOvalShape:"MSOvalShape",MSRectangleShape:"MSRectangleShape",MSStarShape:"MSStarShape",MSPolygonShape:"MSPolygonShape",MSTriangleShape:"MSTriangleShape",MSStyle:"MSStyle",MSStyleBorder:"MSStyleBorder",MSStyleFill:"MSStyleFill",MSStyleShadow:"MSStyleShadow",MSStyleInnerShadow:"MSStyleInnerShadow",MSStyleBlur:"MSStyleBlur",MSStyleBorderOptions:"MSStyleBorderOptions",MSStyleColorControls:"MSStyleColorControls",MSStyleReflection:"MSStyleReflection"}},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){var t=e.lineHeight();t||(t=e.defaultLineHeight());var r=e.fontPostscriptName(),a=e.fontSize(),o=e.textColor().RGBADictionary();return{fontPostscriptName:r,fontSize:a,lineHeight:t,color:o}}function n(e,t){e.setFontPostscriptName(t.fontPostscriptName),e.setFontSize(t.fontSize),e.setLineHeight(t.lineHeight),e.setTextColor((0,c.rgbaToMSColor)(t.color))}function i(e,t){var r=MSDocument.alloc().init(),a=r.currentPage(),o=u.layer.addTextLayerToGroup(a);o.setStringValue("Aa"),n(o,e),o.setFontSize(56),a.addLayers([o]);var i=MSExportRequest.exportRequestsFromExportableLayer(o),l=i.firstObject(),s=l.rect(),c=s.size,d=c.width,f=c.height,y=138,g=108;s.origin.x-=Math.round(y/2-d/2),s.origin.y-=Math.round(g/2-f/2),s.size.width=y,s.size.height=g,l.setRect(s),r.saveExportRequest_toFile(l,t),a.removeLayer(o)}function l(e,t,r,a,o,n){n||(n=NSUUID.UUID().UUIDString());var l=e.stringByAppendingPathComponent(n+".textstyle");ICUtils.createDirectoryIfNotExist(l);var c=l.stringByAppendingPathComponent("preview.png");i(t,c);var u={textStyle:t,index:a,name:r,category:o};return(0,s.saveMetadata)(l,u),(0,s.setModificationDate)(e),{objectID:n,textStyle:t,index:a,category:o,name:r,objectType:"textstyle"}}Object.defineProperty(t,"__esModule",{value:!0}),t.getLayerTextStyle=o,t.set=n,t.add=l;var s=r(10),c=r(1),u=a(c)},function(e,t){"use strict";function r(e){var t=NSOpenPanel.openPanel();if(t.setCanChooseFiles(!1),t.setCanChooseDirectories(!0),t.setCanCreateDirectories(!0),e){var r=NSURL.fileURLWithPath_isDirectory(e,!0);t.setDirectoryURL(r)}return t.runModal()===NSFileHandlingPanelOKButton?t.URLs().lastObject().path():void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.showOpenPanel=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PADDING=20,t.COLUMNS=4,t.ARTBOARD_PADDING=50,t.PAGE_NAME="Styles"},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return y.page.getArtboardFromNameAndIndex(e,A,P)}function n(e){var t=e.hexValue(),r=e.alpha();return t+"-"+r}function i(e,t){var r=t.layers().array(),a=r[1],o=r[2],i=r.lastObject(),l=a.style().fill().color(),s=y.layer.getUserInfoValue(i,"com.invisionlabs.library/sync","rgba");if(s||(s=y.layer.getUserInfoValue(i,"com.invisionlabs.styles/sync","rgba"))){var c=MSColor.colorWithRed_green_blue_alpha(s.r,s.g,s.b,s.a);return{fromColor:c,toColor:l,toColorRgba:n(l),name:o.stringValue()}}}function l(e,t){var r=[],a={};return(0,f.iterate)(t.layers().array(),function(t){var o=i(e,t);o&&(r.push(o),a[o.toColorRgba]=o)}),{data:r,variables:a}}function s(e){return Math.round(255*e)}function c(e){var t=s(e.red()),r=s(e.green()),a=s(e.blue()),o=(0,f.round100)(e.alpha());return"rgba("+t+", "+r+", "+a+", "+o+")"}function u(e,t,r,a,o,n){var i="#"+r.hexValue(),l=n*h+S.PADDING,s=o*b+S.PADDING,u=v,d=m,f=CGRectMake(l,s,u,d),p=y.layer.addGroupToGroup(f,t);p.setName("Swatch: "+i);var M=CGRectMake(0,0,v,m),A=y.layer.addRectangleLayerToGroup(M,p);A.setName("border"),y.layer.addBorder(A,"#dedede",g.BorderPosition.Inside);var P=CGRectMake(0,0,180,130),N=y.layer.addRectangleLayerToGroup(P,p);N.setName(i);var x=N.style(),D=x.fills(),T=void 0;T="function"==typeof D.addNewStylePart?D.addNewStylePart():x.addStylePartOfType(0),T.setColor(r),r.isWhite()&&y.layer.addBorder(N,"#dedede",g.BorderPosition.Inside);var C=y.layer.addTextLayerToGroup(p);C.setStringValue(a),C.setName(a),C.setFont(NSFont.fontWithName_size("HelveticaNeue-Bold",15)),C.setTextColor(MSColor.colorWithSVGString("#444"));var O=C.frame();O.setX(8),O.setY(137);var _=y.layer.addTextLayerToGroup(p);_.setStringValue(i),_.setName(i),_.setFont(NSFont.fontWithName_size("HelveticaNeue",13)),_.setTextColor(MSColor.colorWithSVGString("#777"));var j=_.frame();j.setX(8),j.setY(159);var I=y.layer.addTextLayerToGroup(p);e.setValue_forKey_onLayer(r.RGBADictionary(),"rgba",I),I.setStringValue(c(r)),I.setName("RGB Value"),I.setFont(NSFont.fontWithName_size("HelveticaNeue",12)),I.setTextColor(MSColor.colorWithSVGString("#777"));var L=I.frame();L.setX(8),L.setY(179)}function d(e,t,r,a,o){var i=e.groupColors(),l=i.count();if(!(1>l)){var s=Math.ceil(l/S.COLUMNS),c=h*S.COLUMNS+S.PADDING,d=s*b+S.PADDING;M>d&&(d=M);var g=CGRectMake(0,0,c,d),v=y.page.addArtboard(a,A,g),m=0,P=t.documentData().assets().colors();return(0,f.iterate)(i,function(e){var t=e.color,a=MSColor.colorWithSVGString(t.hex);a.setAlpha(t.alpha);var i=(0,p.getValue)(o,n(a)),l=void 0;l=i?i.name:N,P.addObject(a);var s=Math.floor(m/S.COLUMNS),c=m%S.COLUMNS;u(r,v,a,l,s,c),m+=1}),{colors:i,height:d}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ARTBOARD_INDEX=t.ARTBOARD_NAME=void 0,t.getArtboard=o,t.getData=l,t.generate=d;var f=r(1),y=a(f),g=r(12),S=r(15),p=r(17),v=180,m=200,h=v+S.PADDING,b=m+S.PADDING,M=240,A=t.ARTBOARD_NAME="Color Palette",P=t.ARTBOARD_INDEX=0,N="Color name"},function(e,t){"use strict";function r(e,t){return e?e[t]:void 0}function a(e){return e?e.count():0}function o(e){var t=e.r,r=e.g,a=e.b,o=e.a,n=MSColor.colorWithRed_green_blue_alpha(t,r,a,o),i="#"+n.hexValue(),l=n.alpha();return{hex:i,alpha:l}}Object.defineProperty(t,"__esModule",{value:!0}),t.getValue=r,t.getCount=a,t.rgbaToHex=o},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return u.page.getArtboardFromNameAndIndex(e,h,b)}function n(e){var t=e.layers().array(),r=t[1],a=t.lastObject();return{fromFont:a.stringValue(),toFont:r.fontPostscriptName()}}function i(e){var t=[];return(0,c.iterate)(e.layers().array(),function(e){t.push(n(e))}),t}function l(e,t,r,a){var o=t.fontName,n=t.example,i=a*S+f.PADDING,l=r*p+f.PADDING,s=y,c=g,v=CGRectMake(i,l,s,c),h=u.layer.addGroupToGroup(v,e);h.setName("Font: "+o);var b=CGRectMake(0,0,y,g),M=u.layer.addRectangleLayerToGroup(b,h);M.setName("border"),u.layer.addBorder(M,"#dedede",d.BorderPosition.Inside);var A=u.layer.addTextLayerToGroup(h);A.setStringValue("Aa Zz"),A.setName("Aa Zz"),A.setFontPostscriptName(o),A.setFontSize(20),A.setTextAlignment(d.TextAlignment.Center),A.setTextColor(MSColor.colorWithSVGString("#444"));var P=A.frame();P.setX(0),P.setWidth(y),A.fontPostscriptName().isEqualToString(o)||(A.setStringValue(n),A.setFontPostscriptName(o));var N=u.layer.addTextLayerToGroup(h);N.setStringValue(o),N.setName(o),N.setFont(NSFont.fontWithName_size("HelveticaNeue",12)),N.setTextAlignment(d.TextAlignment.Center),N.setTextColor(MSColor.colorWithSVGString("#777"));var x=N.frame();x.setX(0),x.setWidth(y);var D=g/2-(P.height()+x.height()+m)/2;P.setY(D),x.setY(D+P.height()+m)}function s(e,t,r,a){var o=e.groupFonts(),n=o.count();if(!(1>n)){var i=Math.ceil(n/f.COLUMNS),s=S*f.COLUMNS+f.PADDING,d=i*p+f.PADDING;v>d&&(d=v);var y=CGRectMake(0,a+f.ARTBOARD_PADDING,s,d),g=u.page.addArtboard(r,h,y),m=0;return(0,c.iterate)(o,function(e){var t=Math.floor(m/f.COLUMNS),r=m%f.COLUMNS;l(g,e,t,r),m+=1}),d=a+f.ARTBOARD_PADDING+d,{fonts:o,height:d}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ARTBOARD_INDEX=t.ARTBOARD_NAME=void 0,t.getArtboard=o,t.getData=i,t.generate=s;var c=r(1),u=a(c),d=r(12),f=r(15),y=180,g=120,S=y+f.PADDING,p=g+f.PADDING,v=120,m=10,h=t.ARTBOARD_NAME="Fonts",b=t.ARTBOARD_INDEX=1},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return f.page.getArtboardFromNameAndIndex(e,h,b)}function n(e){var t=e.red(),r=e.green(),a=e.blue(),o=(299*t+587*r+114*a)/1e3;return o>.5}function i(e){var t=e.fontPostscriptName,r=e.colorHex,a=(0,d.round100)(e.fontSize),o=(0,d.round100)(e.colorAlpha),n=e.lineHeight;return void 0===n&&(n=e.lineSpacing),void 0!==n&&(n=(0,d.round100)(n)),t+"-"+a+"-"+n+"-"+r+"-"+o}function l(e,t){var r=t.layers().array(),a=r[1],o=r[2],n=f.layer.getUserInfoValue(o,"com.invisionlabs.library/sync","style");if(n||(n=f.layer.getUserInfoValue(o,"com.invisionlabs.styles/sync","style"))){var l=o.textColor(),s="#"+l.hexValue(),c=(0,d.round100)(l.alpha()),u={fontPostscriptName:o.fontPostscriptName(),fontSize:(0,d.round100)(o.fontSize()),lineHeight:(0,d.round100)(o.lineHeight()),colorHex:s,colorAlpha:c};return{name:a.stringValue(),sharedObjectID:o.style().sharedObjectID(),
key:i(n),newKey:i(u),newData:u}}}function s(e,t,r){var a={},o=[],n=e.documentData().layerTextStyles();return(0,d.iterate)(r.layers().array(),function(r){var i=r.layers().objectAtIndex(2);i.select_byExpandingSelection(!0,!1);var s=n.sharedStyleWithID(i.style().sharedObjectID()),c=f.action.get(e,"MSSyncSharedStyleAction");c.syncSharedStyle(s);var u=l(t,r);u&&(o.push(u),a[u.newKey]=u)}),{data:o,variables:a}}function c(e,t,r,a,o,i,l,s){var c=MSColor.colorWithSVGString(a.colorHex);c.setAlpha(a.colorAlpha);var u=n(c),g=void 0,h=void 0;u?(g=MSColor.colorWithSVGString("#fff"),h=MSColor.colorWithSVGString("#333")):(g=MSColor.colorWithSVGString("#333"),h=MSColor.colorWithSVGString("#fff"));var b=CGRectMake(0,s,S,p),M=f.layer.addGroupToGroup(b,r);M.setName("Text Style: "+(l+1));var A=CGRectMake(0,0,S,p),P=f.layer.addRectangleLayerToGroup(A,M);P.setName("Background");var N=P.style(),x=void 0,D=N.fills();x="function"==typeof D.addNewStylePart?D.addNewStylePart():N.addStylePartOfType(0),x.setColor(h);var T=f.layer.addTextLayerToGroup(M),C=void 0;C=o?o.name:i?"Paragraph":6>l?"H"+(l+1):"Text style",T.setStringValue(C),T.setName("Label"),T.setFont(NSFont.fontWithName_size("HelveticaNeue-Bold",14)),T.setTextAlignment(y.TextAlignment.Center),T.setTextColor(g);var O=T.frame();O.setX(v),O.setY(v),T.setTextBehaviour(y.TextBehaviour.Fixed),T.setTextBehaviour(y.TextBehaviour.Auto);var _=f.layer.addTextLayerToGroup(M);if(_.setStringValue(a.text),_.setName("Example"),_.setFontPostscriptName(a.fontPostscriptName),_.setFontSize(a.fontSize),_.setLineHeight(a.lineHeight),_.setTextColor(c),_.setTextAlignment(y.TextAlignment.Left),_.setTextBehaviour(1),_.setHeightIsClipped(!0),o){var j=t.sharedStyleWithID(o.sharedObjectID);j.setName(C),_.setStyle(j.newInstance())}else{var I=_.style();t.addSharedStyleWithName_firstInstance(C,I)}var L=O.y()+O.height()+m,R=_.frame();R.setX(v),R.setWidth(600),R.setHeight(a.lineHeight),R.setY(L),e.setValue_forKey_onLayer(a,"style",_);var F=a.fontPostscriptName+" / "+(0,d.round100)(a.fontSize)+" px / "+(0,d.round100)(a.lineHeight)+" px Leading / "+a.colorHex;a.colorAlpha<1&&(F+=" ("+100*a.colorAlpha+"%)");var G=f.layer.addTextLayerToGroup(M);G.setStringValue(F),G.setName("Settings"),G.setFont(NSFont.fontWithName_size("HelveticaNeue",17)),G.setTextAlignment(y.TextAlignment.Left),G.setTextColor(g);var B=R.y()+R.height()+m,U=G.frame();U.setX(v),U.setY(B);var E=U.y()+U.height()+v;return P.frame().setHeight(E),E}function u(e,t,r,a,o,n){var l=e.groupTextStyles(),s=l.styles,u=l.maxItemsCount,y=t.documentData().layerTextStyles(),p=s.count();if(!(1>p)){var v=1e3,m=CGRectMake(0,n+g.ARTBOARD_PADDING,S,v),b=f.page.addArtboard(a,h,m),M=0,A=0,P=!1;(0,d.iterate)(s,function(e){var t=e.style,a=void 0;if(o){var n=i(t);a=o[n]}var l=void 0;!P&&u>1&&u===e.itemsCount?(l=!0,P=!0):l=!1,A+=c(r,y,b,t,a,l,M,A),M+=1}),b.frame().setHeight(A);var N=n+g.ARTBOARD_PADDING+A;return{textStyles:s,height:N}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ARTBOARD_INDEX=t.ARTBOARD_NAME=void 0,t.getArtboard=o,t.getData=s,t.generate=u;var d=r(1),f=a(d),y=r(12),g=r(15),S=820,p=100,v=18,m=5,h=t.ARTBOARD_NAME="Text Styles",b=t.ARTBOARD_INDEX=2}])});