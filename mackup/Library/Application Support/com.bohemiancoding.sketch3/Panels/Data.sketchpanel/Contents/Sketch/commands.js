!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e){var t=e.selection,r=void 0;r=t.count()>0&&(0,v.isSymbol)(t.firstObject())?t.count():h.filterLayers(t).count(),e.panel.callback({count:r})}function o(e){var t=e.selection,r=e.panel,n=t.firstObject(),i=h.filterLayers(n.symbolMaster().layers().array()),o=r.api().showSelectSymbolOverrideWindow(i.valueForKey("name"));o>-1&&!function(){var r=i.objectAtIndex(o),n=[r.objectID()],a=e.panel.arguments().words,l=a.count(),s=0;(0,v.iterate)(t,function(e){var t=a[s%l];e.addOverrides_forCellAtIndex_ancestorIDs(t,0,n),s+=1})}()}function a(e){var t=e.selection;if(t.count()>0&&(0,v.isSymbol)(t.firstObject()))return o(e);var r=e.command;t=h.filterLayers(t);var n=t.count(),i=e.panel;if(0===n)return void(0,v.showAlert)("Please select text layer...");var a=t.firstObject();if(a.isEditingText())return void(0,v.showAlert)("You need to exit editing mode before using Type plugin.");var l=i.arguments(),s=l.words,u=l.action,c=!1;if(u){r.setValue_forKey_onLayer_forPluginIdentifier(u,"type-duplicate",a,T.DUPLICATE_IDENTIFIER);var f=u.action;if(f)if(f.isEqualToString("article")){var d=u.options;if(d){var S=d.type;S.isEqualToString("body")&&(c=!0)}}else if(f.isEqualToString("khaled")){var p=u.options;p.isEqualToString("article")&&(c=!0)}}s&&!function(){var e=s.count(),r=0;(0,v.iterate)(t,function(t){var n=s[r%e];h.set(t,n,c),c&&h.setFixed(t),r+=1})}()}function l(e,t){var r=e.document,n=e.command,i=b.filterLayers(e.selection),o=i.count(),a=e.panel,l=a.api(),s=a.identifier(),u=a.arguments();t||(t=u.mode);var c=u.folder,f=u.link,d=u.category;if(0===o)return void a.errorCallback("Please select layer. Selecting groups is not supported.");var S=i[0],p=void 0;if((0,v.isSymbol)(S)){if(p=a.api().resolveAncestorIDsFromSymbol(S),!p)return}else{var y=NSDictionary.dictionaryWithDictionary(u);n.setValue_forKey_onLayer_forPluginIdentifier(y,"photos-duplicate",S,T.DUPLICATE_IDENTIFIER)}if(t.isEqualToString("link")||t.isEqualToString("dropbox")){if(!f)return void a.errorCallback("Please Paste link...");r.showMessage("Downloading image from Dropbox. It may take some time"),p?l.dropbox_selection_ancestorIDs_identifier(f,i,p,s):l.dropbox_selection_identifier(f,i,s)}else if(t.isEqualToString("unsplash"))r.showMessage("Downloading image from Unsplash. It may take some time"),p?l.unsplashWithSelection_ancestorIDs_category_identifier(i,p,d,s):l.unsplashWithSelection_category_identifier(i,d,s);else{if(!c)return void a.errorCallback("Please Select folder...");p?l.imagesFromFolder_applyToLayers_ancestorIDs_identifier(c,i,p,s):l.imagesFromFolder_applyToLayers_identifier(c,i,s)}}function s(e){l(e,NSString.stringWithString("unsplash"))}function u(e){var t=e.panel,r=t.arguments(),n=r.initialFolder,i=NSOpenPanel.openPanel();if(i.setCanChooseFiles(!1),i.setCanChooseDirectories(!0),n){var o=NSURL.fileURLWithPath_isDirectory(n,!0);i.setDirectoryURL(o)}if(i.runModal()===NSFileHandlingPanelOKButton){var a=i.URLs().lastObject();t.callback({path:a.path()})}}function c(e){var t=e.panel,r=e.document.currentPage(),n=e.command,i=n.valueForKey_onLayer_forPluginIdentifier("json-files",r,t.identifier());i||(i=JSON.stringify([])),t.callback(i)}function f(e,t,r){var n=e.document.currentPage(),i=e.command,o=e.panel,a=P.createFile(o,i,n,t,r),l=a.file,s=a.files;(0,v.iterate)(e.selection,function(e){P.setMetaData(o.identifier(),i,e,[],l.path,l.name)}),o.callback_forIdentifier(s,"get-json-files"),o.callback_forIdentifier(l,"on-json-change")}function d(e){var t=String(e.panel.arguments()),r=JSON.parse(t);f(e,r.json,r.name)}function S(e){var t=NSOpenPanel.openPanel();if(t.setCanChooseFiles(!0),t.setCanChooseDirectories(!1),t.runModal()===NSFileHandlingPanelOKButton){var r=t.URLs().lastObject(),n=ICUtils.readJSON(r);if(n){var i=r.lastPathComponent();f(e,n,i,!1)}else e.panel.callback({error:!0})}}function p(e){var t=e.panel,r=e.command,n=e.selection,i={paths:{selection:null,repeat:null}};t.callback(i);var o=null,a=!0,l=void 0;(0,v.iterate)(n,function(e){return l=r.valueForKey_onLayer_forPluginIdentifier("json-plugin-data",e,t.identifier()),l&&!a&&o!==l?(l=null,!1):(o=l,void(a=!1))}),l&&t.callback(l)}function y(e){var t=e.command,r=e.panel;(0,v.iterate)(e.selection,function(e){t.setValue_forKey_onLayer_forPluginIdentifier("null","json-plugin-data",e,r.identifier())})}function g(e){var t=e.panel,r=t.api(),n=String(t.arguments()),i=e.command,o=e.selection,a=JSON.parse(n),l=a.firstValue,s=a.values,u=a.paths,c=a.file,f=a.name;if(0!==o.count()){var d=o.firstObject()["class"]()!==MSTextLayer;if(d)(0,v.iterate)(o,function(e){P.setMetaData(t.identifier(),i,e,u,c,f)}),r.setPlaceholderImageToLayers(o),r.downloadImages_applyToLayers_identifier(s,o,t.identifier());else if(0===s.length&&s.push(l),1===o.count()){var S=o[0];P.setupLayer(t.identifier(),i,S,l,u,c,f)}else!function(){var e=0;(0,v.iterate)(o,function(r){P.setupLayer(t.identifier(),i,r,s[e++%s.length],u,c,f)})}()}}Object.defineProperty(t,"__esModule",{value:!0}),t.textLayersCount=i,t.fillText=a,t.fillPhoto=l,t.fillPhotoUnsplash=s,t.openFolderDialog=u,t.getJSONFiles=c,t.newJSONFile=d,t.chooseFile=S,t.jsonUpdateActiveFields=p,t.jsonClearSelectedValue=y,t.jsonSendValues=g;var v=r(1),m=r(8),h=n(m),M=r(10),b=n(M),_=r(11),P=n(_),T=r(12)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e,t){for(var r=e.objectEnumerator(),n=void 0;(n=r.nextObject())&&t(n)!==!1;);}function o(e,t){var r=NSMutableArray.alloc().init();return i(e,function(e){r.addObject(t(e))}),r}function a(e,t){var r=NSMutableArray.alloc().init();return i(e,function(e){t(e)&&r.addObject(e)}),r}function l(e,t){var r=NSPredicate.predicateWithFormat("self isMemberOfClass: %@",t);return e.filteredArrayUsingPredicate(r)}function s(e){return Math.round(100*e)/100}function u(e,t,r){var n=e[t];return void 0===n||null===n?r:n}function c(e){return e["class"]()===MSSymbolInstance}function f(e){return e["class"]()===MSSymbolMaster}function d(e){return e["class"]()===MSTextLayer}function S(e){var t=e.r,r=e.g,n=e.b,i=e.a;return MSColor.colorWithRed_green_blue_alpha(t,r,n,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.action=t.doc=t.page=t.layer=t.pasteboard=t.showConfirm=t.showAlert=void 0,t.iterate=i,t.map=o,t.filter=a,t.filterArrayByClass=l,t.round100=s,t.get=u,t.isSymbol=c,t.isSymbolMaster=f,t.isTextLayer=d,t.rgbaToMSColor=S;var p=r(2);Object.defineProperty(t,"showAlert",{enumerable:!0,get:function(){return p.showAlert}}),Object.defineProperty(t,"showConfirm",{enumerable:!0,get:function(){return p.showConfirm}});var y=r(3),g=n(y),v=r(4),m=n(v),h=r(5),M=n(h),b=r(6),_=n(b),P=r(7),T=n(P);t.pasteboard=g,t.layer=m,t.page=M,t.doc=_,t.action=T},function(e,t){"use strict";function r(e){var t=NSAlert.alloc().init();t.setAlertStyle(i.NSWarningAlertStyle),t.setMessageText(e),t.runModal()}function n(e,t){var r=NSAlert.alloc().init();return r.addButtonWithTitle("OK"),r.addButtonWithTitle("Cancel"),r.setInformativeText(t),r.setMessageText(e),r.runModal()===NSAlertFirstButtonReturn}Object.defineProperty(t,"__esModule",{value:!0}),t.showAlert=r,t.showConfirm=n;var i={NSWarningAlertStyle:0,NSInformationalAlertStyle:1,NSCriticalAlertStyle:2}},function(e,t){"use strict";function r(e){var t=NSPasteboard.generalPasteboard();t.declareTypes_owner([NSPasteboardTypeString],null),t.setString_forType(e,NSPasteboardTypeString)}Object.defineProperty(t,"__esModule",{value:!0}),t.writeString=r},function(e,t){"use strict";function r(e,t){t.addLayers(NSArray.arrayWithObject(e))}function n(e,t){var n=NSBezierPath.bezierPathWithRect(e),i=MSShapeGroup.shapeWithBezierPath(n);return r(i,t),"function"==typeof i.embedInShapeGroup&&(i=i.embedInShapeGroup()),i}function i(e){var t=MSTextLayer.alloc().initWithFrame(CGRectMake(0,0,100,100));return t.adjustFrameToFit(),r(t,e),t}function o(e,t){var n=MSLayerGroup.alloc().initWithFrame(e);return r(n,t),n}function a(e,t,r){var n=e.style(),i=n.borders(),o=void 0;o="function"==typeof i.addNewStylePart?i.addNewStylePart():n.addStylePartOfType(1);var a=MSColor.colorWithSVGString(t);o.setColor(a),o.setPosition(r)}function l(e){e&&e.removeFromParent()}function s(e,t,r){var n=e.userInfo().objectForKey(t);return n?n.objectForKey(r):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.addToGroup=r,t.addRectangleLayerToGroup=n,t.addTextLayerToGroup=i,t.addGroupToGroup=o,t.addBorder=a,t.removeFromParent=l,t.getUserInfoValue=s},function(e,t){"use strict";function r(e,t){for(var r=e.artboards(),n=r.count()-1;n>=0;n--){var i=r[n];if(i.name().isEqualToString(t))return i}}function n(e,t,r){if(e.artboards().count()>r){var n=e.artboards()[r];if(n.name().isEqualToString(t))return n}}function i(e,t,r){var n=MSArtboardGroup.alloc().initWithFrame(r);return e.addLayers([n]),n.setName(t),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getArtboardFromName=r,t.getArtboardFromNameAndIndex=n,t.addArtboard=i},function(e,t){"use strict";function r(e,t){var r=e.addBlankPage();return r.setName(t),e.setCurrentPage(r),r}function n(e,t){for(var r=e.pages(),n=r.count()-1;n>=0;n--){var i=r[n];if(i.name().isEqualToString(t))return i}}function i(e,t){var r=e.currentView();t.setIsSelected(!0),r.zoomToSelection(),t.setIsSelected(!1)}function o(e){var t=e.currentView();"function"==typeof t.actualSizeWithoutAnimating?t.actualSizeWithoutAnimating():t.zoomToActualSizeAnimated(!1),t.animateScrollOriginToPoint(CGPointMake(100,100))}Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=r,t.getPageFromName=n,t.zoomTo=i,t.zoom100Center=o},function(e,t){"use strict";function r(e,t){var r=e.actionsController();return"function"==typeof r.actionWithName?r.actionWithName(t):r.actionWithID(t)}function n(e){var t=r(e,"MSGroupAction");return t.group(null),e.selectedLayers().firstObject()}function i(e,t){var n=t.name(),i=r(e,"MSClippingMaskAction");i.clippingMask(null),t.setName(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.get=r,t.groupSelection=n,t.toggleClipping=i},function(e,t,r){"use strict";function n(e){return e["class"]()===MSTextLayer}function i(e){return(0,s.filter)(e,n)}function o(e,t,r){var n=void 0;r&&(n=e.textAlignment(),e.setTextAlignment(l.TextAlignment.Left)),e.setIsEditingText(!0),e.setStringValue(t),e.setIsEditingText(!1),e.finishEditing(),r&&void 0!==n&&e.setTextAlignment(n)}function a(e){var t=e.parentArtboard();if(t){var r=e.absoluteRect(),n=r.x(),i=r.y(),o=r.width(),a=r.height(),s=t.absoluteRect(),u=s.width()-n+s.x(),c=s.height()-i+s.y(),f=e.rect();o>u&&(f.size.width=u),a>c&&(f.size.height=c),e.setTextBehaviour(l.TextBehaviour.Fixed),e.setHeightIsClipped(!0),e.setRect(f)}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterLayers=i,t.set=o,t.setFixed=a;var l=r(9),s=r(1)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FillType={Solid:0,Gradient:1,Pattern:4,Noise:5},t.GradientType={Linear:0,Radial:1,Circular:2},t.PatternFillType={Tile:0,Fill:1},t.NoiseFillType={Original:0,Black:1,White:2,Color:3},t.BorderLineCapsStyle={Butt:0,Round:1,Square:2},t.BorderLineJoinStyle={Miter:0,Round:1,Bevel:2},t.LineDecorationType={None:0,OpenedArrow:1,ClosedArrow:2,Bar:3},t.BlurType={GaussianBlur:0,MotionBlur:1,ZoomBlur:2,BackgroundBlur:3},t.BorderPosition={Center:0,Inside:1,Outside:2,Both:3},t.MaskMode={Outline:0,Alpha:1},t.BooleanOperation={None:-1,Union:0,Subtract:1,Intersect:2,Difference:3},t.ExportOptionsFormat={PNG:"png",JPG:"jpg",TIFF:"tiff",PDF:"pdf",EPS:"eps",SVG:"svg"},t.BlendingMode={Normal:0,Darken:1,Multiply:2,ColorBurn:3,Lighten:4,Screen:5,ColorDodge:6,Overlay:7,SoftLight:8,HardLight:9,Difference:10,Exclusion:11,Hue:12,Saturation:13,Color:14,Luminosity:15},t.TextAlignment={Left:0,Right:1,Center:2,Justified:3},t.TextBehaviour={Auto:0,Fixed:1},t.CurvePointMode={Straight:1,Mirrored:2,Disconnected:4,Asymmetric:3},t.ModelClasses={MSModelObject:"MSModelObject",MSModelBase:"MSModelBase",MSDocumentData:"MSDocumentData",MSLayer:"MSLayer",MSShapeGroup:"MSShapeGroup",MSLayerGroup:"MSLayerGroup",MSPage:"MSPage",MSTextLayer:"MSTextLayer",MSBitmapLayer:"MSBitmapLayer",MSSliceLayer:"MSSliceLayer",MSArtboardGroup:"MSArtboardGroup",MSOvalShape:"MSOvalShape",MSRectangleShape:"MSRectangleShape",MSStarShape:"MSStarShape",MSPolygonShape:"MSPolygonShape",MSTriangleShape:"MSTriangleShape",MSStyle:"MSStyle",MSStyleBorder:"MSStyleBorder",MSStyleFill:"MSStyleFill",MSStyleShadow:"MSStyleShadow",MSStyleInnerShadow:"MSStyleInnerShadow",MSStyleBlur:"MSStyleBlur",MSStyleBorderOptions:"MSStyleBorderOptions",MSStyleColorControls:"MSStyleColorControls",MSStyleReflection:"MSStyleReflection"}},function(e,t,r){"use strict";function n(e){return e["class"]()!==MSLayerGroup&&e["class"]()!==MSSliceLayer}function i(e){return(0,o.filter)(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterLayers=i;var o=r(1)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e,t,r,n,i,o){var a=JSON.stringify({name:o,paths:n,path:i});t.setValue_forKey_onLayer_forPluginIdentifier(a,"json-plugin-data",r,e)}function o(e,t,r,n,o,a,l){i(e,t,r,o,a,l),r["class"]()===MSTextLayer&&s.set(r,n,!1)}function a(e,t,r,n,i){var o=ICUtils.objectToJSONString(n),a=JSON.parse(t.valueForKey_onLayer_forPluginIdentifier("json-files",r,e.identifier()));a||(a=[]);for(var l=String(o.sha1()),s=!1,u=void 0,c=0;c<a.length;++c){var f=a[c];if(f.hash===l&&f.name===i){s=!0,u=f.path;break}}if(!s){u=NSUUID.UUID().UUIDString()+".json";var d=e.settingsDocumentsPath()+"/"+u;o.writeToFile_atomically_encoding_error(d,!0,NSUTF8StringEncoding,null),a.push({path:u,name:i,hash:l}),t.setValue_forKey_onLayer_forPluginIdentifier(JSON.stringify(a),"json-files",r,e.identifier())}var S={path:u,name:i,json:n};return{file:S,files:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.setMetaData=i,t.setupLayer=o,t.createFile=a;var l=r(8),s=n(l)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DUPLICATE_IDENTIFIER="com.invisionlabs.duplicate"}])});